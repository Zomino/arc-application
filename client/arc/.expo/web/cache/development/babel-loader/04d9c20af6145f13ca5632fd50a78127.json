{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { useForm, Controller } from 'react-hook-form';\nimport { useState, useEffect } from 'react';\nimport ApiService from \"../ApiService\";\nimport CurrencyInput from 'react-native-currency-input';\nimport { useNavigation } from '@react-navigation/native';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function NewArcForm(props) {\n  var navigation = useNavigation();\n\n  var _useForm = useForm({\n    defaultValues: {\n      eventName: '',\n      date: '',\n      venue: '',\n      foodCost: '',\n      drinksCost: ''\n    }\n  }),\n      register = _useForm.register,\n      setValue = _useForm.setValue,\n      handleSubmit = _useForm.handleSubmit,\n      control = _useForm.control,\n      reset = _useForm.reset,\n      errors = _useForm.formState.errors;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      eventName = _useState2[0],\n      setEventName = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      date = _useState4[0],\n      setDate = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      venue = _useState6[0],\n      setVenue = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      drinksCost = _useState8[0],\n      setDrinksCost = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      userList = _useState10[0],\n      setUserList = _useState10[1];\n\n  var _useState11 = useState(new Array()),\n      _useState12 = _slicedToArray(_useState11, 2),\n      eventUsers = _useState12[0],\n      setEventUsers = _useState12[1];\n\n  var _useState13 = useState(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      foodCost = _useState14[0],\n      setFoodCost = _useState14[1];\n\n  var _useState15 = useState(new Array()),\n      _useState16 = _slicedToArray(_useState15, 2),\n      foodUsers = _useState16[0],\n      setFoodUsers = _useState16[1];\n\n  var _useState17 = useState(new Array()),\n      _useState18 = _slicedToArray(_useState17, 2),\n      drinksUsers = _useState18[0],\n      setDrinksUsers = _useState18[1];\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      eventCreated = _useState20[0],\n      setEventCreated = _useState20[1];\n\n  useEffect(function () {\n    ApiService.getUsers().then(function (users) {\n      return setUserList(users);\n    });\n    setEventCreated(false);\n  }, []);\n\n  var calculateArc = function calculateArc() {\n    var creator = props.user;\n    var arcs = {};\n    var arcMembers = {};\n    var arcsPaid = {};\n    var arcFirstNames = {};\n    var arcItems = {};\n    eventUsers.map(function (user) {\n      return arcsPaid[user.email] = false;\n    });\n    eventUsers.map(function (user) {\n      return arcFirstNames[user.email] = user.firstName;\n    });\n    var foodCostPerUser = Math.round(foodCost / foodUsers.length * 100) / 100;\n    var drinkCostPerUser = Math.round(drinksCost / drinksUsers.length * 100) / 100;\n    foodUsers.map(function (user) {\n      if (drinksUsers.indexOf(user) === -1) {\n        arcs[user.email] = foodCostPerUser;\n        arcItems[user.email] = 'F';\n      } else {\n        arcs[user.email] = foodCostPerUser + drinkCostPerUser;\n        arcItems[user.email] = 'FD';\n      }\n    });\n    drinksUsers.map(function (user) {\n      if (foodUsers.indexOf(user) === -1) {\n        arcs[user.email] = drinkCostPerUser;\n        arcItems[user.email] = 'D';\n      } else return;\n    });\n    var newArc = {\n      eventName: eventName,\n      date: date,\n      venue: venue,\n      foodCost: foodCost,\n      drinksCost: drinksCost,\n      totalCost: foodCost + drinksCost,\n      creator: props.user,\n      arcMembers: arcMembers,\n      arcs: arcs,\n      arcsPaid: arcsPaid,\n      arcItems: arcItems,\n      arcFirstNames: arcFirstNames,\n      arcNameArray: eventUsers\n    };\n    var savedEvent = ApiService.createEvent(newArc);\n    console.log(savedEvent);\n  };\n\n  function onChangeEvent(arg) {\n    setEventName(arg);\n  }\n\n  ;\n\n  function onChangeDate(arg) {\n    setDate(arg);\n  }\n\n  ;\n\n  function onChangeVenue(arg) {\n    setVenue(arg);\n  }\n\n  ;\n\n  function onChangeFoodCost(arg) {\n    setFoodCost(arg);\n  }\n\n  ;\n\n  function onChangeDrinksCost(arg) {\n    setDrinksCost(arg);\n  }\n\n  ;\n\n  function updateEventUsers(arg) {\n    setEventUsers([].concat(_toConsumableArray(eventUsers), _toConsumableArray(arg)));\n  }\n\n  function updateFoodUsers(arg) {\n    setFoodUsers([].concat(_toConsumableArray(foodUsers), _toConsumableArray(arg)));\n  }\n\n  function updateDrinksUsers(arg) {\n    setDrinksUsers([].concat(_toConsumableArray(drinksUsers), _toConsumableArray(arg)));\n  }\n\n  return eventCreated ? _jsx(View, {\n    children: _jsx(Text, {\n      children: \"Event Created!\"\n    })\n  }) : _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(View, {\n      style: styles.button,\n      children: _jsx(Button, {\n        color: \"black\",\n        title: \"ADD FRIENDS\",\n        onPress: function onPress() {\n          return navigation.navigate('FriendsScreen', {\n            userList: userList,\n            updateEventUsers: updateEventUsers\n          });\n        }\n      })\n    }), _jsx(Text, {\n      style: styles.label,\n      children: \"EVENT NAME\"\n    }), _jsx(Controller, {\n      control: control,\n      render: function render(_ref) {\n        var value = _ref.field.value;\n        return _jsx(TextInput, {\n          style: styles.input,\n          onChangeText: function onChangeText(value) {\n            return onChangeEvent(value);\n          },\n          value: eventName\n        });\n      },\n      name: \"eventName\",\n      rules: {\n        required: true\n      }\n    }), _jsx(Text, {\n      style: styles.label,\n      children: \"Date\"\n    }), _jsx(Controller, {\n      control: control,\n      render: function render(_ref2) {\n        var value = _ref2.field.value;\n        return _jsx(TextInput, {\n          style: styles.input,\n          onChangeText: function onChangeText(value) {\n            return onChangeDate(value);\n          },\n          value: date\n        });\n      },\n      name: \"date\",\n      rules: {\n        required: true\n      }\n    }), _jsx(Text, {\n      style: styles.label,\n      children: \"Venue\"\n    }), _jsx(Controller, {\n      control: control,\n      render: function render(_ref3) {\n        var value = _ref3.field.value;\n        return _jsx(TextInput, {\n          style: styles.input,\n          onChangeText: function onChangeText(value) {\n            return onChangeVenue(value);\n          },\n          value: venue\n        });\n      },\n      name: \"venue\",\n      rules: {\n        required: true\n      }\n    }), _jsx(Text, {\n      style: styles.label,\n      children: \"Food Cost\"\n    }), _jsx(Controller, {\n      control: control,\n      render: function render(_ref4) {\n        var value = _ref4.field.value;\n        return _jsx(CurrencyInput, {\n          keyboardType: \"numeric\",\n          style: styles.input,\n          onChangeValue: function onChangeValue(value) {\n            return onChangeFoodCost(value);\n          },\n          prefix: \"\\xA3\",\n          delimiter: \",\",\n          separator: \".\",\n          precision: 2,\n          value: foodCost,\n          onSubmitEditing: function onSubmitEditing() {\n            navigation.navigate('FoodScreen', {\n              foodCost: foodCost,\n              eventUsers: eventUsers,\n              updateFoodUsers: updateFoodUsers\n            });\n          }\n        });\n      },\n      name: \"foodCost\",\n      rules: {\n        required: true\n      }\n    }), _jsx(Text, {\n      style: styles.label,\n      children: \"Drinks Cost\"\n    }), _jsx(Controller, {\n      control: control,\n      render: function render(_ref5) {\n        var value = _ref5.field.value;\n        return _jsx(CurrencyInput, {\n          keyboardType: \"numeric\",\n          style: styles.input,\n          onChangeValue: function onChangeValue(value) {\n            return onChangeDrinksCost(value);\n          },\n          prefix: \"\\xA3\",\n          delimiter: \",\",\n          separator: \".\",\n          precision: 2,\n          value: drinksCost,\n          onSubmitEditing: function onSubmitEditing() {\n            navigation.navigate('DrinksScreen', {\n              drinksCost: drinksCost,\n              eventUsers: eventUsers,\n              updateDrinksUsers: updateDrinksUsers\n            });\n          }\n        });\n      },\n      name: \"drinksCost\",\n      rules: {\n        required: true\n      }\n    }), _jsx(View, {\n      style: styles.buttonBottom,\n      children: _jsx(Button, {\n        color: \"black\",\n        title: \"CREATE ARC\",\n        onPress: function onPress() {\n          calculateArc();\n          setEventCreated(true);\n        }\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    width: 280,\n    height: 600,\n    alignItems: 'center',\n    alignContent: 'center'\n  },\n  label: {\n    color: 'white',\n    marginTop: 15,\n    marginBottom: 5\n  },\n  button: {\n    justifyContent: 'center',\n    width: 140,\n    marginTop: 30,\n    height: 40,\n    backgroundColor: '#C996D4',\n    borderRadius: 4,\n    fontWeight: \"bold\"\n  },\n  buttonBottom: {\n    justifyContent: 'center',\n    width: 140,\n    marginTop: 30,\n    height: 40,\n    backgroundColor: '#29b6f6',\n    borderRadius: 4,\n    fontWeight: \"bold\"\n  },\n  input: {\n    width: 320,\n    backgroundColor: 'black',\n    borderColor: 'rgb(129,129,129)',\n    borderWidth: 1,\n    color: 'white',\n    height: 40,\n    borderRadius: 4,\n    padding: 10\n  },\n  signup: {\n    color: 'rgb(230,230,230)',\n    marginTop: 15,\n    marginBottom: 5,\n    fontWeight: 'bold',\n    fontSize: 30\n  },\n  text: {\n    color: 'white',\n    fontSize: 20\n  }\n});","map":{"version":3,"sources":["/Users/gooseeduardos/Development/codeWorks/senior/arc-app/client/arc/components/NewArcForm.tsx"],"names":["React","useForm","Controller","useState","useEffect","ApiService","CurrencyInput","useNavigation","NewArcForm","props","navigation","defaultValues","eventName","date","venue","foodCost","drinksCost","register","setValue","handleSubmit","control","reset","errors","formState","setEventName","setDate","setVenue","setDrinksCost","userList","setUserList","Array","eventUsers","setEventUsers","setFoodCost","foodUsers","setFoodUsers","drinksUsers","setDrinksUsers","eventCreated","setEventCreated","getUsers","then","users","calculateArc","creator","user","arcs","arcMembers","arcsPaid","arcFirstNames","arcItems","map","email","firstName","foodCostPerUser","Math","round","length","drinkCostPerUser","indexOf","newArc","totalCost","arcNameArray","savedEvent","createEvent","console","log","onChangeEvent","arg","onChangeDate","onChangeVenue","onChangeFoodCost","onChangeDrinksCost","updateEventUsers","updateFoodUsers","updateDrinksUsers","styles","container","button","navigate","label","value","field","input","required","buttonBottom","StyleSheet","create","width","height","alignItems","alignContent","color","marginTop","marginBottom","justifyContent","backgroundColor","borderRadius","fontWeight","borderColor","borderWidth","padding","signup","fontSize","text"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {Text, StyleSheet, View, TextInput, Button, ScrollView} from 'react-native';\nimport { useForm, Controller} from 'react-hook-form';\nimport Constants from 'expo-constants';\nimport { useState, useEffect } from 'react'\nimport ApiService from '../ApiService'\nimport { NavigationContainer, NavigationProp } from '@react-navigation/native';\nimport { ParamsList } from '../screens/paramsList';\nimport CurrencyInput from 'react-native-currency-input';\nimport { useNavigation } from '@react-navigation/native';\nimport { StackNavigationProp } from '@react-navigation/stack';\n\n\nexport default function NewArcForm(props:any) {\n\n  // console.log('newarcprops', props)\n\n\n  const navigation = useNavigation();\n\n  const { register, setValue, handleSubmit, control, reset, formState: { errors } } = useForm({\n    defaultValues: {\n      eventName: '',\n      date: '',\n      venue: '',\n      foodCost: '',\n      drinksCost: '',\n    }\n  });\n\n  const [eventName, setEventName] = useState(\"\")\n  const [date, setDate] = useState(\"\")\n  const [venue, setVenue] = useState(\"\")\n  const [drinksCost, setDrinksCost] = useState(0)\n  const [userList, setUserList] = useState([])\n  const [eventUsers, setEventUsers] = useState(new Array())\n  const [foodCost, setFoodCost] = useState(0)\n  const [foodUsers, setFoodUsers] = useState(new Array())\n  const [drinksUsers, setDrinksUsers] = useState(new Array())\n  const [eventCreated, setEventCreated] = useState(false)\n\n  useEffect(() => {\n    ApiService.getUsers()\n    .then(users => {\n      return setUserList(users);\n\n    });\n    setEventCreated(false)\n  },[],\n  )\n\n  // console.log(eventUsers)\n\n  const calculateArc = function () {\n\n    const creator = props.user;\n    const arcs: any = {};\n    const arcMembers: any = {};\n    const arcsPaid: any = {};\n    const arcFirstNames: any = {};\n    const arcItems: any = {};\n\n\n    eventUsers.map(user => arcsPaid[user.email] = false)\n    eventUsers.map(user => arcFirstNames[user.email] = user.firstName)\n\n    let foodCostPerUser = Math.round((foodCost / foodUsers.length) * 100) / 100;\n    let drinkCostPerUser =  Math.round((drinksCost / drinksUsers.length) * 100) / 100;\n\n\n    foodUsers.map(user => {\n      if (drinksUsers.indexOf(user) === -1) {\n        arcs[user.email] = foodCostPerUser;\n        arcItems[user.email] = 'F';\n      }\n      else {\n        arcs[user.email] = foodCostPerUser + drinkCostPerUser;\n        arcItems[user.email] = 'FD';\n      }\n    })\n\n    drinksUsers.map(user => {\n      if ((foodUsers.indexOf(user) === -1)) {\n        arcs[user.email] = drinkCostPerUser;\n        arcItems[user.email] = 'D';\n      }\n      else return\n    })\n\n\n\n\n\n    // console.log('arcs',arcs)\n    // console.log('arcsPaid',arcItems)\n    // console.log('arcItems',arcsPaid)\n\n\n    const newArc = {\n      eventName: eventName,\n      date: date,\n      venue: venue,\n      foodCost: foodCost,\n      drinksCost: drinksCost,\n      totalCost: foodCost + drinksCost,\n      creator: props.user,\n      arcMembers: arcMembers,\n      arcs: arcs,\n      arcsPaid: arcsPaid,\n      arcItems: arcItems,\n      arcFirstNames: arcFirstNames,\n      arcNameArray: eventUsers,\n    }\n\n    const savedEvent = ApiService.createEvent(newArc);\n    console.log(savedEvent);\n\n  }\n\n  function onChangeEvent(arg : string) {\n    setEventName(arg)\n  };\n  function onChangeDate(arg : string) {\n    setDate(arg)\n  };\n  function onChangeVenue(arg : string) {\n    setVenue(arg)\n  };\n  function onChangeFoodCost(arg : number) {\n    // console.log(arg)\n    setFoodCost(arg)\n  };\n  function onChangeDrinksCost(arg : number) {\n    setDrinksCost(arg)\n  };\n\n  function updateEventUsers(arg : any) {\n    setEventUsers([...eventUsers, ...arg])\n  }\n\n  function updateFoodUsers(arg :any) {\n    setFoodUsers([...foodUsers, ...arg])\n  }\n\n\n  function updateDrinksUsers(arg :any) {\n    setDrinksUsers([...drinksUsers, ...arg])\n  }\n\n\n\n\n  return (\n\n    eventCreated ? (\n      <View>\n        <Text>Event Created!</Text>\n      </View>\n    ) :\n    (\n    <View style={styles.container}>\n      {/* <Text style={styles.text}>New Arc</Text> */}\n      <View style={styles.button}>\n        <Button color=\"black\"\n          title=\"ADD FRIENDS\"\n          onPress={()=> navigation.navigate('FriendsScreen', {\n            userList: userList,\n            updateEventUsers: updateEventUsers\n          })}\n        />\n      </View>\n\n    <Text style={styles.label}>EVENT NAME</Text>\n      <Controller\n        control={control}\n        render={({field: { value }}) => (\n          <TextInput\n            style={styles.input}\n            onChangeText={value => onChangeEvent(value)}\n            value={eventName}\n          />\n        )}\n        name=\"eventName\"\n        rules={{ required: true }}\n      />\n\n      <Text style={styles.label}>Date</Text>\n      <Controller\n        control={control}\n        render={({field: { value }}) => (\n          <TextInput\n            style={styles.input}\n            onChangeText={value => onChangeDate(value)}\n            value={date}\n          />\n        )}\n        name=\"date\"\n        rules={{ required: true }}\n      />\n\n      <Text style={styles.label}>Venue</Text>\n      <Controller\n        control={control}\n        render={({field: { value }}) => (\n          <TextInput\n            style={styles.input}\n            onChangeText={value => onChangeVenue(value)}\n            value={venue}\n            />\n            )}\n            name=\"venue\"\n            rules={{ required: true }}\n            />\n\n      <Text style={styles.label}>Food Cost</Text>\n      <Controller\n        control={control}\n        render={({field: { value }}) => (\n          <CurrencyInput\n          keyboardType = 'numeric'\n          style={styles.input}\n          onChangeValue={value => onChangeFoodCost(value)}\n          prefix=\"£\"\n          delimiter=\",\"\n          separator=\".\"\n          precision={2}\n          value={foodCost}\n          onSubmitEditing={()=> {\n            navigation.navigate('FoodScreen', {\n              foodCost: foodCost,\n              eventUsers: eventUsers,\n              updateFoodUsers: updateFoodUsers,\n            })}}\n          />\n        )}\n        name=\"foodCost\"\n        rules={{ required: true }}\n      />\n\n<Text style={styles.label}>Drinks Cost</Text>\n      <Controller\n        control={control}\n        render={({field: { value }}) => (\n          <CurrencyInput\n          keyboardType = 'numeric'\n          style={styles.input}\n          onChangeValue={value => onChangeDrinksCost(value)}\n          prefix=\"£\"\n          delimiter=\",\"\n          separator=\".\"\n          precision={2}\n          value={drinksCost}\n          onSubmitEditing={()=> {\n            navigation.navigate('DrinksScreen', {\n              drinksCost: drinksCost,\n              eventUsers: eventUsers,\n              updateDrinksUsers: updateDrinksUsers,\n            })}}\n          />\n        )}\n        name=\"drinksCost\"\n        rules={{ required: true }}\n      />\n       <View style={styles.buttonBottom}>\n        <Button color=\"black\"\n          title=\"CREATE ARC\"\n          onPress={()=>{calculateArc();\n            setEventCreated(true)\n          }}\n        />\n      </View>\n  </View>\n  ))\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    width: 280,\n    height:600,\n    alignItems:'center',\n    alignContent: 'center'\n  },\n  label: {\n    color: 'white',\n    marginTop: 15,\n    marginBottom: 5,\n    // marginRight:220\n  },\n  button: {\n    // justifyContent:center,\n    justifyContent: 'center',\n    width: 140,\n    marginTop: 30,\n    height: 40,\n    backgroundColor: '#C996D4',\n    borderRadius: 4,\n    fontWeight: \"bold\"\n\n  },\n  buttonBottom: {\n    // justifyContent:center,\n    justifyContent: 'center',\n    width: 140,\n    marginTop: 30,\n    height: 40,\n    backgroundColor: '#29b6f6',\n    borderRadius: 4,\n    fontWeight: \"bold\"\n\n  },\n  input: {\n    width:320,\n    backgroundColor: 'black',\n    borderColor: 'rgb(129,129,129)',\n    borderWidth:1,\n    color: 'white',\n    height: 40,\n    borderRadius: 4,\n    padding: 10,\n    // backgroundColor:\n  },\n\n  signup: {\n    color: 'rgb(230,230,230)',\n    marginTop: 15,\n    marginBottom: 5,\n    fontWeight: 'bold',\n    fontSize: 30,\n    // fontFamily: 'Josefin Sans'\n  },\n\n  text: {\n    color:'white',\n    fontSize:20\n  }\n\n\n});\n"]},"metadata":{},"sourceType":"module"}