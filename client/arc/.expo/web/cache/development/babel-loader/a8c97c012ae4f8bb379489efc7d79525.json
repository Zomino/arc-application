{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"children\", \"cursorVisible\", \"style\", \"cursorProps\"];\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport * as React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport useBlink from \"./hooks/useBlink\";\n\nvar TextWithCursor = function TextWithCursor(textWithCursorProps) {\n  var children = textWithCursorProps.children,\n      cursorVisible = textWithCursorProps.cursorVisible,\n      style = textWithCursorProps.style,\n      cursorProps = textWithCursorProps.cursorProps,\n      rest = _objectWithoutProperties(textWithCursorProps, _excluded);\n\n  var blinkVisible = useBlink();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      isTyping = _React$useState2[0],\n      setIsTyping = _React$useState2[1];\n\n  var timeout = React.useRef();\n  var cursorVisibility = React.useMemo(function () {\n    return cursorVisible && (blinkVisible || isTyping);\n  }, [blinkVisible, cursorVisible, isTyping]);\n  var cursorFontSize = React.useMemo(function () {\n    return StyleSheet.flatten([styles.text, style]).fontSize || 18;\n  }, [style]);\n  React.useEffect(function () {\n    setIsTyping(true);\n    timeout.current = setTimeout(function () {\n      setIsTyping(false);\n    }, 500);\n    return function () {\n      timeout.current && clearTimeout(timeout.current);\n    };\n  }, [children]);\n  return React.createElement(Text, _extends({\n    style: [styles.text, style]\n  }, rest), children, React.createElement(Text, _extends({}, cursorProps, {\n    style: [{\n      fontSize: cursorFontSize * (cursorFontSize < 26 ? 1.42 : 1.25)\n    }, styles.cursor, cursorProps === null || cursorProps === void 0 ? void 0 : cursorProps.style, !cursorVisibility ? styles.cursorHidden : undefined]\n  }), \"|\"));\n};\n\nvar styles = StyleSheet.create({\n  text: {\n    fontSize: 18,\n    marginTop: -3.2\n  },\n  cursor: {\n    color: '#6495ed'\n  },\n  cursorHidden: {\n    color: 'transparent'\n  }\n});\nexport default TextWithCursor;","map":{"version":3,"sources":["TextWithCursor.tsx"],"names":["TextWithCursor","textWithCursorProps","rest","blinkVisible","useBlink","React","timeout","cursorVisibility","cursorVisible","cursorFontSize","StyleSheet","styles","setIsTyping","setTimeout","clearTimeout","fontSize","cursorProps","text","marginTop","cursor","color","cursorHidden"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAP,KAAA,MAAA,OAAA;;;AAIA,OAAA,QAAA;;AAEA,IAAMA,cAAc,GAAIC,SAAlBD,cAAkBC,CAAAA,mBAAD,EAA8C;AACnE,MAAM,QAAN,GAAA,mBAAA,CAAM,QAAN;AAAA,MAAM,aAAN,GAAA,mBAAA,CAAM,aAAN;AAAA,MAAM,KAAN,GAAA,mBAAA,CAAM,KAAN;AAAA,MAAM,WAAN,GAAA,mBAAA,CAAM,WAAN;AAAA,MAAwDC,IAAxD,4BAAA,mBAAA;;AAEA,MAAMC,YAAY,GAAGC,QAArB,EAAA;;AAEA,wBAAgCC,KAAK,CAALA,QAAAA,CAAhC,KAAgCA,CAAhC;AAAA;AAAA,MAAM,QAAN;AAAA,MAAM,WAAN;;AAEA,MAAMC,OAAO,GAAGD,KAAK,CAArB,MAAgBA,EAAhB;AAEA,MAAME,gBAAgB,GAAG,KAAK,CAAL,OAAA,CAAc,YAAM;AAC3C,WAAOC,aAAa,KAAKL,YAAY,IAArC,QAAoB,CAApB;AADuB,GAAA,EAEtB,CAAA,YAAA,EAAA,aAAA,EAFH,QAEG,CAFsB,CAAzB;AAIA,MAAMM,cAAc,GAAG,KAAK,CAAL,OAAA,CAAc,YAAM;AACzC,WAAOC,UAAU,CAAVA,OAAAA,CAAmB,CAACC,MAAM,CAAP,IAAA,EAAnBD,KAAmB,CAAnBA,EAAAA,QAAAA,IAAP,EAAA;AADqB,GAAA,EAEpB,CAFH,KAEG,CAFoB,CAAvB;AAIAL,EAAAA,KAAK,CAALA,SAAAA,CAAgB,YAAM;AACpBO,IAAAA,WAAW,CAAXA,IAAW,CAAXA;AACAN,IAAAA,OAAO,CAAPA,OAAAA,GAAkBO,UAAU,CAAC,YAAM;AACjCD,MAAAA,WAAW,CAAXA,KAAW,CAAXA;AAD0B,KAAA,EAA5BN,GAA4B,CAA5BA;AAIA,WAAO,YAAM;AACXA,MAAAA,OAAO,CAAPA,OAAAA,IAAmBQ,YAAY,CAACR,OAAO,CAAvCA,OAA+B,CAA/BA;AADF,KAAA;AANFD,GAAAA,EASG,CATHA,QASG,CATHA;AAWA,SACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA,QAAA,CAAA;AAAM,IAAA,KAAK,EAAE,CAACM,MAAM,CAAP,IAAA,EAAA,KAAA;AAAb,GAAA,EAAA,IAAA,CAAA,EAAA,QAAA,EAEE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA,QAAA,CAAA,EAAA,EAAA,WAAA,EAAA;AAEE,IAAA,KAAK,EAAE,CACL;AACEI,MAAAA,QAAQ,EAAEN,cAAc,IAAIA,cAAc,GAAdA,EAAAA,GAAAA,IAAAA,GAAJ,IAAA;AAD1B,KADK,EAILE,MAAM,CAJD,MAAA,EAKLK,WALK,KAAA,IAKLA,IAAAA,WALK,KAAA,KAAA,CAKLA,GALK,KAAA,CAKLA,GAAAA,WAAW,CALN,KAAA,EAML,CAAA,gBAAA,GAAoBL,MAAM,CAA1B,YAAA,GANK,SAAA;AAFT,GAAA,CAAA,EAHJ,GAGI,CAFF,CADF;AA5BF,CAAA;;AAgDA,IAAMA,MAAM,GAAG,UAAU,CAAV,MAAA,CAAkB;AAC/BM,EAAAA,IAAI,EAAE;AACJF,IAAAA,QAAQ,EADJ,EAAA;AAEJG,IAAAA,SAAS,EAAE,CAAC;AAFR,GADyB;AAK/BC,EAAAA,MAAM,EAAE;AACNC,IAAAA,KAAK,EAAE;AADD,GALuB;AAQ/BC,EAAAA,YAAY,EAAE;AACZD,IAAAA,KAAK,EAAE;AADK;AARiB,CAAlB,CAAf;AAaA,eAAA,cAAA","sourcesContent":["import * as React from 'react';\nimport { StyleSheet, Text } from 'react-native';\n\nimport type { TextWithCursorProps } from './props';\nimport useBlink from './hooks/useBlink';\n\nconst TextWithCursor = (textWithCursorProps: TextWithCursorProps) => {\n  const { children, cursorVisible, style, cursorProps, ...rest } = textWithCursorProps;\n\n  const blinkVisible = useBlink();\n\n  const [isTyping, setIsTyping] = React.useState(false);\n\n  const timeout = React.useRef<NodeJS.Timeout>();\n\n  const cursorVisibility = React.useMemo(() => {\n    return cursorVisible && (blinkVisible || isTyping);\n  }, [blinkVisible, cursorVisible, isTyping]);\n\n  const cursorFontSize = React.useMemo(() => {\n    return StyleSheet.flatten([styles.text, style]).fontSize || 18;\n  }, [style]);\n\n  React.useEffect(() => {\n    setIsTyping(true);\n    timeout.current = setTimeout(() => {\n      setIsTyping(false);\n    }, 500);\n\n    return () => {\n      timeout.current && clearTimeout(timeout.current);\n    };\n  }, [children]);\n\n  return (\n    <Text style={[styles.text, style]} {...rest}>\n      {children}\n      <Text\n        {...cursorProps}\n        style={[\n          {\n            fontSize: cursorFontSize * (cursorFontSize < 26 ? 1.42 : 1.25),\n          },\n          styles.cursor,\n          cursorProps?.style,\n          !cursorVisibility ? styles.cursorHidden : undefined,\n        ]}\n      >\n        |\n      </Text>\n    </Text>\n  );\n};\n\nconst styles = StyleSheet.create({\n  text: {\n    fontSize: 18,\n    marginTop: -3.2,\n  },\n  cursor: {\n    color: '#6495ed',\n  },\n  cursorHidden: {\n    color: 'transparent',\n  },\n});\n\nexport default TextWithCursor;\n"]},"metadata":{},"sourceType":"module"}